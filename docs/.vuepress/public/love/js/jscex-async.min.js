// build time:Mon Nov 13 2017 19:24:11 GMT+0800 (CST)
(function(){var e=function(){};e.prototype={isCancellation:!0,message:"The task has been cancelled."};typeof __jscex__async__taskIdSeed==="undefined"&&(__jscex__async__taskIdSeed=0);var t=function(e){return typeof e.start==="function"&&typeof e.addEventListener==="function"&&typeof e.removeEventListener==="function"&&typeof e.complete==="function"},n=function(n){if(!n.modules.async){var s=function(){};s.prototype={register:function(e){this.isCancellationRequested&&e();if(!this._handlers)this._handlers=[];this._handlers.push(e)},unregister:function(e){this._handlers&&(e=this._handlers.indexOf(e),e>=0&&this._handlers.splice(e,1))},cancel:function(){if(!this.isCancellationRequested){this.isCancellationRequested=!0;var e=this._handlers;delete this._handlers;for(var t=0;t<e.length;t++)try{e[t]()}catch(s){n.logger.warn("[WARNING] Cancellation handler threw an error: "+s)}}},throwIfCancellationRequested:function(){if(this.isCancellationRequested)throw new e}};var i=function(e){this.id=++__jscex__async__taskIdSeed;this._delegate=e;this._listeners={};this.status="ready"};i.prototype={start:function(){if(this.status!="ready")throw Error('Task can only be started in "ready" status.');this.status="running";this._delegate(this)},complete:function(e,t){if(this.status!="running")throw Error('The "complete" method can only be called in "running" status.');var s=this._listeners;delete this._listeners;if(e=="success")this.result=t,this.status="succeeded",this._notify("success",s.success);else if(e=="failure")this.error=t,this.status=t.isCancellation?"canceled":"faulted",this._notify("failure",s.failure);else throw Error("Unsupported type: "+e);this._notify("complete",s.complete);this.error&&!s.failure&&!s.complete&&n.logger.warn("[WARNING] An unhandled error occurred: "+this.error)},_notify:function(e,t){if(t)for(var s=0;s<t.length;s++)try{t[s](this)}catch(i){n.logger.warn("[WARNING] The task's "+e+" listener threw an error: "+i)}},addEventListener:function(e,t){this._listeners&&(this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t))},removeEventListener:function(e,t){if(this._listeners){var n=this._listeners[e];if(n){var s=n.indexOf(t);s>=0&&n.splice(s,1)}}}};i.create=function(e){return new i(e)};i.isTask=t;var r=function(){};r.prototype={Start:function(e,t){return i.create(function(n){t.next(e,function(e,t){if(e=="normal"||e=="return")n.complete("success",t);else if(e=="throw")n.complete("failure",t);else throw Error("Unsupported type: "+e)})})},Bind:function(e,t){return{next:function(n,s){var i=function(e){if(e.error)s("throw",e.error);else{var i;try{i=t.call(n,e.result)}catch(r){s("throw",r);return}i.next(n,s)}};e.status=="ready"?(e.addEventListener("complete",i),e.start()):e.status=="running"?e.addEventListener("complete",i):i(e)}}}};for(var o in n.BuilderBase.prototype)r.prototype[o]=n.BuilderBase.prototype[o];if(!n.Async)n.Async={};o=n.Async;o.CancellationToken=s;o.CanceledError=e;o.Task=i;o.AsyncBuilder=r;if(!n.builders)n.builders={};n.binders.async="$await";n.builders.async=new r;n.modules.async=!0}},s=typeof define==="function"&&!define.amd,i=typeof require==="function"&&typeof define==="function"&&define.amd;if(typeof require==="function"&&typeof module!=="undefined"&&module.exports)module.exports.init=function(e){if(!e.modules.builderbase){if(typeof __dirname==="string")try{require.paths.unshift(__dirname)}catch(t){try{module.paths.unshift(__dirname)}catch(s){}}require("jscex-builderbase").init(e)}n(e)};else if(s)define("jscex-async",["jscex-builderbase"],function(e,t,s){s.exports.init=function(t){t.modules.builderbase||e("jscex-builderbase").init(t);n(t)}});else if(i)define("jscex-async",["jscex-builderbase"],function(e){return{init:function(t){t.modules.builderbase||e.init(t);n(t)}}});else{if(typeof Jscex==="undefined")throw Error('Missing the root object, please load "jscex" module first.');if(!Jscex.modules.builderbase)throw Error('Missing essential components, please initialize "builderbase" module first.');n(Jscex)}})();
//rebuild by neat 